<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>üî• G√âN√âRATEUR DIGIY LOC - Cr√©er une fiche logement en 2 min ! üî•</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{
  --bg:#0b1020;
  --card:#020617;
  --accent:#facc15;
  --accent-soft:#f97316;
  --ink:#f9fafb;
  --muted:#9ca3af;
  --line:#1f2937;
  --sn-green:#00853F;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:radial-gradient(circle at top,#111827 0,#020617 55%);
  color:var(--ink);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  padding:20px;
}

.container{
  max-width:900px;
  margin:0 auto;
}

.header{
  text-align:center;
  margin-bottom:30px;
}

.header h1{
  font-size:36px;
  font-weight:900;
  color:var(--accent);
  margin:0 0 10px;
}

.header p{
  font-size:16px;
  color:var(--muted);
  margin:0;
}

.badge{
  display:inline-block;
  padding:8px 16px;
  background:var(--sn-green);
  color:#fff;
  border-radius:999px;
  font-weight:800;
  font-size:14px;
  margin-top:10px;
}

.form-card{
  background:var(--card);
  border-radius:20px;
  border:1px solid var(--line);
  padding:30px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
  margin-bottom:20px;
}

.section-title{
  font-size:24px;
  font-weight:800;
  color:var(--accent);
  margin:0 0 20px;
  padding-bottom:10px;
  border-bottom:2px solid var(--line);
}

.form-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  margin-bottom:20px;
}

@media(max-width:768px){
  .form-grid{
    grid-template-columns:1fr;
  }
}

.form-group{
  display:flex;
  flex-direction:column;
}

.form-group.full{
  grid-column:1/-1;
}

label{
  font-weight:700;
  font-size:14px;
  color:var(--ink);
  margin-bottom:8px;
  display:flex;
  align-items:center;
  gap:6px;
}

label .required{
  color:#ef4444;
  font-size:18px;
}

input, textarea, select{
  padding:12px;
  border-radius:10px;
  border:1px solid var(--line);
  background:#111827;
  color:var(--ink);
  font-size:14px;
  font-weight:500;
}

input:focus, textarea:focus, select:focus{
  outline:none;
  border-color:var(--accent);
}

textarea{
  min-height:100px;
  resize:vertical;
  font-family:inherit;
}

.hint{
  font-size:12px;
  color:var(--muted);
  margin-top:4px;
}

.btn{
  border:none;
  border-radius:999px;
  padding:16px 32px;
  font-size:18px;
  font-weight:800;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  transition:all 0.2s;
}

.btn-generate{
  background:linear-gradient(135deg,var(--sn-green),#006B32);
  color:#fff;
  width:100%;
  box-shadow:0 10px 30px rgba(0,133,63,0.4);
}

.btn-generate:hover{
  transform:translateY(-2px);
  box-shadow:0 15px 40px rgba(0,133,63,0.6);
}

.btn-download{
  background:linear-gradient(135deg,#facc15,#f97316);
  color:#111;
  width:100%;
  margin-top:20px;
  display:none;
}

.btn-download:hover{
  transform:translateY(-2px);
  box-shadow:0 15px 40px rgba(250,204,21,0.6);
}

.success-msg{
  display:none;
  background:rgba(34,197,94,0.1);
  border:2px solid #22c55e;
  border-radius:12px;
  padding:20px;
  margin-top:20px;
  text-align:center;
}

.success-msg.show{
  display:block;
}

.success-msg h3{
  margin:0 0 10px;
  color:#22c55e;
  font-size:24px;
}

.preview{
  background:#0f172a;
  border-radius:12px;
  padding:15px;
  margin-top:10px;
  font-family:monospace;
  font-size:12px;
  color:#22c55e;
  overflow-x:auto;
  display:none;
}

.preview.show{
  display:block;
}

.eagle{
  font-size:48px;
  display:block;
  margin:10px 0;
}
</style>
</head>
<body>

<div class="container">
  <!-- HEADER -->
  <div class="header">
    <h1>ü¶Ö G√âN√âRATEUR DIGIY LOC</h1>
    <p>Cr√©ez une fiche logement professionnelle en 2 minutes !</p>
    <div class="badge">‚àû Pierre par pierre - L'aigle royal construit ‚àû</div>
  </div>

  <!-- FORMULAIRE -->
  <div class="form-card">
    <h2 class="section-title">üìã Informations du logement</h2>
    
    <div class="form-grid">
      <div class="form-group">
        <label>Nom du logement <span class="required">*</span></label>
        <input type="text" id="logementNom" placeholder="Ex: CHEZ BAPTISTE" required>
        <div class="hint">Sans guillemets, MAJUSCULES recommand√©es</div>
      </div>

      <div class="form-group">
        <label>Ville <span class="required">*</span></label>
        <input type="text" id="logementVille" placeholder="Ex: Saly" required>
      </div>

      <div class="form-group full">
        <label>Description courte <span class="required">*</span></label>
        <textarea id="descCourte" placeholder="Ex: Appartement confortable dans un quartier paisible de Saly, sans bruyance, id√©al pour les s√©jours en famille ou entre amis." required></textarea>
      </div>

      <div class="form-group">
        <label>Capacit√© max (personnes) <span class="required">*</span></label>
        <input type="number" id="maxGuests" value="4" min="1" max="20" required>
      </div>

      <div class="form-group">
        <label>Type de logement</label>
        <select id="typeLogement">
          <option>Appartement</option>
          <option>Villa</option>
          <option>Studio</option>
          <option>Maison</option>
          <option>Chambre</option>
        </select>
      </div>
    </div>

    <h2 class="section-title">üí∞ Tarifs</h2>
    
    <div class="form-grid">
      <div class="form-group">
        <label>Prix / Nuit (FCFA) <span class="required">*</span></label>
        <input type="number" id="tarifNuit" placeholder="30000" required>
      </div>

      <div class="form-group">
        <label>Prix / Semaine (FCFA) <span class="required">*</span></label>
        <input type="number" id="tarifSemaine" placeholder="175000" required>
      </div>

      <div class="form-group">
        <label>Prix / Mois (FCFA) <span class="required">*</span></label>
        <input type="number" id="tarifMois" placeholder="550000" required>
      </div>
    </div>

    <h2 class="section-title">üë§ Propri√©taire</h2>
    
    <div class="form-grid">
      <div class="form-group">
        <label>Nom complet <span class="required">*</span></label>
        <input type="text" id="ownerName" placeholder="Ex: Jean Baptiste Beauville" required>
      </div>

      <div class="form-group">
        <label>WhatsApp principal <span class="required">*</span></label>
        <input type="tel" id="ownerWa" placeholder="+221771342889" required>
        <div class="hint">Format: +221XXXXXXXXX</div>
      </div>

      <div class="form-group">
        <label>WhatsApp secondaire</label>
        <input type="tel" id="ownerWa2" placeholder="+221778765785">
        <div class="hint">Optionnel</div>
      </div>

      <div class="form-group">
        <label>Num√©ro Wave <span class="required">*</span></label>
        <input type="tel" id="wavePhone" placeholder="+221771342889" required>
        <div class="hint">Pour les paiements</div>
      </div>
    </div>

    <h2 class="section-title">üì∏ M√©dias</h2>
    
    <div class="form-grid">
      <div class="form-group full">
        <label>URL de la photo principale <span class="required">*</span></label>
        <input type="url" id="photoUrl" placeholder="https://orange-pig-270004.hostingersite.com/wp-content/uploads/2025/06/042-BAPTISTE.png" required>
        <div class="hint">Upload d'abord sur orange-pig-270004.hostingersite.com, puis colle l'URL</div>
      </div>

      <div class="form-group full">
        <label>URL vid√©o pr√©sentation (Google Drive)</label>
        <input type="url" id="videoUrl" placeholder="https://drive.google.com/file/d/...">
        <div class="hint">Optionnel - Partage public sur Google Drive</div>
      </div>
    </div>

    <h2 class="section-title">üè∑Ô∏è Caract√©ristiques (Chips)</h2>
    
    <div class="form-grid">
      <div class="form-group">
        <label>Chip 1</label>
        <input type="text" id="chip1" placeholder="Ex: Quartier calme">
      </div>
      <div class="form-group">
        <label>Chip 2</label>
        <input type="text" id="chip2" placeholder="Ex: S√©n√©lec en sus">
      </div>
      <div class="form-group">
        <label>Chip 3</label>
        <input type="text" id="chip3" placeholder="Ex: Parking disponible">
      </div>
      <div class="form-group">
        <label>Chip 4</label>
        <input type="text" id="chip4" placeholder="Ex: WiFi inclus">
      </div>
    </div>

    <!-- BOUTON G√âN√âRATION -->
    <button class="btn btn-generate" id="btnGenerate">
      üöÄ G√âN√âRER LA FICHE LOGEMENT
    </button>

    <!-- MESSAGE SUCC√àS -->
    <div class="success-msg" id="successMsg">
      <span class="eagle">ü¶Ö</span>
      <h3>FICHE G√âN√âR√âE AVEC SUCC√àS !</h3>
      <p>Ton fichier HTML est pr√™t fr√©rot ! T√©l√©charge-le et d√©ploie ! üî•</p>
      <button class="btn btn-download" id="btnDownload">
        üíæ T√âL√âCHARGER LE FICHIER HTML
      </button>
    </div>

    <!-- PREVIEW -->
    <div class="preview" id="preview"></div>
  </div>
</div>

<script>
let generatedHTML = '';

document.getElementById('btnGenerate').addEventListener('click', generateFiche);
document.getElementById('btnDownload').addEventListener('click', downloadFile);

function generateFiche() {
  // R√âCUP√âRATION DES DONN√âES
  const logementNom = document.getElementById('logementNom').value.trim();
  const logementVille = document.getElementById('logementVille').value.trim();
  const descCourte = document.getElementById('descCourte').value.trim();
  const maxGuests = document.getElementById('maxGuests').value;
  const typeLogement = document.getElementById('typeLogement').value;
  
  const tarifNuit = document.getElementById('tarifNuit').value;
  const tarifSemaine = document.getElementById('tarifSemaine').value;
  const tarifMois = document.getElementById('tarifMois').value;
  
  const ownerName = document.getElementById('ownerName').value.trim();
  const ownerWa = document.getElementById('ownerWa').value.trim();
  const ownerWa2 = document.getElementById('ownerWa2').value.trim() || ownerWa;
  const wavePhone = document.getElementById('wavePhone').value.trim();
  
  const photoUrl = document.getElementById('photoUrl').value.trim();
  const videoUrl = document.getElementById('videoUrl').value.trim();
  
  const chip1 = document.getElementById('chip1').value.trim() || (maxGuests + " personnes max");
  const chip2 = document.getElementById('chip2').value.trim() || "S√©n√©lec en sus";
  const chip3 = document.getElementById('chip3').value.trim() || "Quartier calme";
  const chip4 = document.getElementById('chip4').value.trim() || "R√©servation directe propri√©taire";

  // VALIDATION
  if (!logementNom || !logementVille || !descCourte || !ownerName || !ownerWa || !wavePhone || !photoUrl) {
    alert('‚ùå Merci de remplir tous les champs obligatoires (*)');
    return;
  }

  // G√âN√âRATION DE L'ID UNIQUE
  const logementId = logementNom.toUpperCase().replace(/\s+/g, '-') + '-' + logementVille.toUpperCase() + '-LOC';
  
  // EXTRACTION ID WhatsApp (sans +)
  const ownerWaId = ownerWa.replace(/\+/g, '');
  
  // G√âN√âRATION DU HTML
  generatedHTML = generateHTMLTemplate({
    logementNom,
    logementVille,
    logementId,
    descCourte,
    maxGuests,
    typeLogement,
    tarifNuit,
    tarifSemaine,
    tarifMois,
    ownerName,
    ownerWa,
    ownerWaId,
    ownerWa2,
    wavePhone,
    photoUrl,
    videoUrl,
    chip1, chip2, chip3, chip4
  });

  // AFFICHAGE SUCC√àS
  document.getElementById('successMsg').classList.add('show');
  document.getElementById('btnDownload').style.display = 'flex';
  
  // PREVIEW
  const preview = document.getElementById('preview');
  preview.textContent = '‚úÖ Fichier HTML g√©n√©r√© : ' + logementNom.toLowerCase().replace(/\s+/g, '-') + '.html';
  preview.classList.add('show');
  
  // SCROLL
  document.getElementById('successMsg').scrollIntoView({ behavior: 'smooth' });
}

function downloadFile() {
  const logementNom = document.getElementById('logementNom').value.trim();
  const filename = 'chez-' + logementNom.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '') + '.html';
  
  const blob = new Blob([generatedHTML], { type: 'text/html' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  a.click();
  URL.revokeObjectURL(url);
  
  alert('üî• Fichier t√©l√©charg√© : ' + filename + '\n\nMaintenant, upload sur ton serveur et GO ! üöÄ');
}

function generateHTMLTemplate(data) {
  return `<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>${data.logementNom} ‚Äî ${data.typeLogement} √† ${data.logementVille}</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root{
    --bg:#0b1020;
    --card:#020617;
    --card-soft:#020617;
    --accent:#facc15;
    --accent-soft:#f97316;
    --ink:#f9fafb;
    --muted:#9ca3af;
    --line:#1f2937;
    --sn-green:#00853F;
    --sn-green-soft:#E8F5EC;
    --sn-green-deep:#064E3B;
  }
  *{box-sizing:border-box;}
  body{
    margin:0; padding:0;
    background:radial-gradient(circle at top,#111827 0,#020617 55%);
    color:var(--ink);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  }
  .app{
    max-width:980px;
    margin:0 auto;
    min-height:100vh;
    display:flex;
    flex-direction:column;
  }
  header{
    padding:14px 16px;
    display:flex;
    justify-content:space-between;
    gap:12px;
    align-items:center;
  }
  .brand{
    font-weight:700;
    font-size:18px;
  }
  .brand span{
    color:var(--accent);
  }
  .tag{
    font-size:11px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.6);
    padding:4px 10px;
    white-space:nowrap;
    color:var(--muted);
  }
  main{flex:1;padding:0 12px 16px;}

  .hero{
    background:linear-gradient(135deg,#111827,#020617);
    border-radius:18px;
    padding:16px;
    border:1px solid rgba(250,204,21,.4);
    display:grid;
    grid-template-columns:minmax(0,1.3fr) minmax(0,1fr);
    gap:16px;
    align-items:flex-start;
    box-shadow:0 20px 40px rgba(0,0,0,.7);
    margin-bottom:16px;
  }
  @media(max-width:900px){
    .hero{grid-template-columns:1fr;}
  }
  .hero h1{
    margin:0 0 6px;
    font-size:22px;
  }
  .hero p{
    margin:0 0 8px;
    font-size:13px;
    color:var(--muted);
  }
  .chips{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    margin-top:6px;
  }
  .chip{
    font-size:11px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.6);
    padding:4px 8px;
    color:var(--muted);
  }

  .hero-media{
    margin-top:10px;
  }
  .hero-photo{
    width:100%;
    max-height:220px;
    border-radius:14px;
    object-fit:cover;
    display:block;
    border:1px solid #1f2937;
  }
  .hero-caption{
    margin-top:4px;
    font-size:11px;
    color:#e5e7eb;
    font-weight:500;
  }

  .price-block{
    background:#020617;
    border-radius:14px;
    border:1px solid #1f2937;
    padding:10px 12px;
    font-size:13px;
    color:#ffffff;
  }
  .price-block h2{
    margin:0 0 4px;
    font-size:16px;
    font-weight:900;
    color:var(--accent);
  }
  .tarifs{
    display:flex;
    flex-direction:column;
    gap:6px;
    margin:8px 0;
    font-size:15px;
    font-weight:700;
  }
  .tarifs span{
    display:flex;
    justify-content:space-between;
  }
  .tarifs strong{
    color:#22c55e;
    font-size:16px;
    font-weight:900;
  }

  .cta-col{
    display:flex;
    flex-direction:column;
    gap:8px;
    margin-top:14px;
  }
  .btn{
    border:none;
    border-radius:999px;
    padding:9px 12px;
    font-size:14px;
    font-weight:600;
    cursor:pointer;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:6px;
    text-decoration:none;
  }
  .btn-wa{
    background:#16a34a;
    color:#ecfdf3;
  }
  .btn-call{
    background:#0f172a;
    color:#e5e7eb;
    border:1px solid #1f2937;
  }
  .btn-video{
    background:#111827;
    color:#e5e7eb;
    border:1px solid #334155;
    font-size:13px;
  }

  .layout{
    display:grid;
    grid-template-columns:minmax(0,1.1fr) minmax(0,1fr);
    gap:12px;
  }
  @media(max-width:900px){
    .layout{grid-template-columns:1fr;}
  }

  .card{
    background:var(--card);
    border-radius:16px;
    border:1px solid var(--line);
    box-shadow:0 16px 32px rgba(0,0,0,.6);
    padding:12px;
  }
  .card h2{
    margin:0 0 4px;
    font-size:16px;
  }
  .card small{
    font-size:12px;
    color:var(--muted);
  }

  .form-grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
    margin-top:8px;
  }
  @media(max-width:640px){
    .form-grid{
      grid-template-columns:1fr;
    }
  }

  .field label{
    display:block;
    font-size:11px;
    color:var(--muted);
    margin-bottom:2px;
  }
  .field input,
  .field select{
    width:100%;
    padding:7px 9px;
    border-radius:10px;
    border:1px solid var(--line);
    background:#020617;
    color:#f9fafb;
    font-size:13px;
  }
  .field input[type="date"]{
    color-scheme:dark;
  }

  .summary{
    margin-top:8px;
    font-size:14px;
    color:var(--muted);
  }
  .summary strong{
    color:var(--accent-soft);
  }

  footer{
    padding:8px 14px 14px;
    font-size:11px;
    color:var(--muted);
    text-align:center;
  }

  a.inline-link{
    color:var(--accent-soft);
    text-decoration:none;
  }
  a.inline-link:hover{
    text-decoration:underline;
  }

  .digiy-title-strong {
    font-size:18px;
    font-weight:800;
    color:#ffffff !important;
  }
  .digiy-label-strong {
    font-size:14px;
    font-weight:700;
    color:#ffffff !important;
  }
  .digiy-black-strong {
    font-size:16px;
    font-weight:800;
    color:#ffffff !important;
  }

  .card h2.digiy-title-strong + small{
    color:#e5e7eb !important;
    font-weight:600;
  }
  input::placeholder,
  select{
    color:#cbd5e1 !important;
    font-weight:500;
  }

  .pay-number {
    font-size:24px;
    font-weight:900;
    color:#22c55e;
    letter-spacing:1px;
  }
  .pay-note {
    font-size:14px;
    font-weight:700;
    color:#22c55e;
  }

  .wave-card{
    margin-top:14px;
    padding:16px;
    border-radius:16px;
    background:#0f172a;
    border:2px solid #22c55e;
    box-shadow:0 0 22px rgba(34,197,94,0.28);
  }

  .resa-card{
    margin-top:4px;
    border-radius:18px;
    padding:24px;
    background:linear-gradient(135deg,#00853F 0%,#006B32 100%);
    border:3px solid #FCBF49;
    box-shadow:0 20px 40px rgba(0,133,63,.5);
    color:#ffffff;
  }
  
  .resa-header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:8px;
    margin-bottom:12px;
    flex-wrap:wrap;
  }
  
  .resa-title-block h2{
    margin:0;
    font-size:42px;
    font-weight:900;
    text-transform:uppercase;
    letter-spacing:1px;
    text-shadow:2px 2px 4px rgba(0,0,0,.3);
    color:#ffffff;
  }
  
  .resa-title-block small{
    display:block;
    margin-top:10px;
    font-size:20px;
    font-weight:800;
    color:#FEF3C7;
    text-shadow:1px 1px 2px rgba(0,0,0,.2);
  }
  
  .resa-badge{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:8px 14px;
    border-radius:999px;
    background:rgba(252,191,73,0.2);
    border:2px solid #FCBF49;
    color:#FEF3C7;
    font-size:13px;
    text-transform:uppercase;
    letter-spacing:0.08em;
    font-weight:800;
    white-space:nowrap;
  }
  
  .resa-badge-dot{
    width:10px;
    height:10px;
    border-radius:999px;
    background:#FCBF49;
    box-shadow:0 0 12px rgba(252,191,73,0.8);
  }

  .resa-steps{
    margin-top:10px;
    margin-bottom:12px;
    font-size:15px;
    font-weight:700;
    color:#FEF3C7;
  }
  .resa-steps strong{
    font-size:16px;
    font-weight:900;
  }
  .resa-steps ul{
    margin:6px 0 0 18px;
    padding:0;
  }
  .resa-steps li{
    margin-bottom:4px;
    font-weight:600;
  }

  .resa-card .field label{
    font-weight:900;
    font-size:14px;
    color:#FEF3C7 !important;
    margin-bottom:4px;
  }

  .resa-summary-box{
    margin-top:14px;
    padding:12px;
    border-radius:12px;
    background:rgba(255,255,255,.15);
    border:2px solid #FCBF49;
    color:#FEF3C7;
    font-size:16px;
    font-weight:800;
  }
  .resa-summary-box strong{
    color:#ffffff;
    font-weight:900;
  }
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="brand">${data.logementNom} ‚Äî <span>DIGIY LOC</span></div>
    <div class="tag">${data.typeLogement} √† ${data.logementVille} ¬∑ ${data.maxGuests} personnes max</div>
  </header>

  <main>
    <section class="hero">
      <div>
        <h1>${data.typeLogement} ${data.logementNom} ‚Äî ${data.logementVille}</h1>
        <p>${data.descCourte}</p>
        <div class="chips">
          <span class="chip">${data.chip1}</span>
          <span class="chip">${data.chip2}</span>
          <span class="chip">${data.chip3}</span>
          <span class="chip">${data.chip4}</span>
        </div>

        <div class="hero-media">
          <img src="${data.photoUrl}"
               alt="${data.typeLogement} ${data.logementNom} √† ${data.logementVille}"
               class="hero-photo">
          <div class="hero-caption">
            Vue du ${data.typeLogement.toLowerCase()} ${data.logementNom} ‚Äî ${data.logementVille} (visuel DIGIY).
          </div>
        </div>
      </div>

      <div>
        <div class="price-block">
          <h2>Tarifs ${data.logementNom}</h2>
          <div class="tarifs">
            <span><span>Nuit :</span><strong>${parseInt(data.tarifNuit).toLocaleString('fr-FR')} F</strong></span>
            <span><span>Semaine :</span><strong>${parseInt(data.tarifSemaine).toLocaleString('fr-FR')} F</strong></span>
            <span><span>Mois :</span><strong>${parseInt(data.tarifMois).toLocaleString('fr-FR')} F</strong></span>
          </div>
          <div style="font-size:11px;margin-top:4px;color:var(--muted);">
            ‚ö° S√©n√©lec en sus selon consommation √©lectrique.
          </div>
        </div>

        <div class="wave-card">
          <div style="font-size:20px;font-weight:900;color:#ffffff;margin-bottom:8px;">
            üí≥ Paiement direct propri√©taire ‚Äî Wave
          </div>

          <div class="pay-number">
            ${data.wavePhone}
          </div>

          <div class="pay-note">
            ‚úî √Ä utiliser dans votre application Wave
          </div>

          <div style="margin-top:10px;font-size:15px;font-weight:700;color:#ffffff;">
            Propri√©taire : ${data.ownerName}
          </div>
        </div>

        <div class="cta-col">
          <a class="btn btn-wa" id="btnWa">
            üí¨ R√©server par WhatsApp
          </a>

          <a class="btn btn-call" id="btnCall">
            üìû Appeler le propri√©taire
          </a>

          <button class="btn"
                  style="background:#facc15;color:#111827;"
                  type="button"
                  id="btnSavePayMethod">
            üìù Enregistrer mes infos (Wave)
          </button>

          ${data.videoUrl ? `<a class="btn btn-video"
             href="${data.videoUrl}"
             target="_blank" rel="noopener">
            üé• Voir la vid√©o de pr√©sentation
          </a>` : ''}
        </div>
      </div>
    </section>

    <section class="layout">
      <article class="card resa-card">
        <div class="resa-header">
          <div class="resa-title-block">
            <h2>R√©server ${data.logementNom}</h2>
            <small>
              Choisissez vos dates, vos infos, puis envoyez en 1 clic sur WhatsApp
            </small>
          </div>
          <div class="resa-badge">
            <span class="resa-badge-dot"></span>
            <span>0% commission ¬∑ Paiement direct</span>
          </div>
        </div>

        <div class="resa-steps">
          <strong>Comment √ßa marche ?</strong>
          <ul>
            <li>Je choisis mes dates d'arriv√©e et de d√©part.</li>
            <li>Je renseigne mon nom, mon t√©l√©phone et le nombre de personnes.</li>
            <li>Je clique sur <strong>"R√©server par WhatsApp"</strong> pour parler directement avec le propri√©taire.</li>
          </ul>
        </div>

        <div class="form-grid">
          <div class="field">
            <label>Date d'arriv√©e</label>
            <input type="date" id="dateIn">
          </div>
          <div class="field">
            <label>Date de d√©part</label>
            <input type="date" id="dateOut">
          </div>
          <div class="field">
            <label>Nombre de personnes</label>
            <select id="guests">
              ${Array.from({length: parseInt(data.maxGuests)}, (_, i) => 
                `<option value="${i+1}"${i+1 === parseInt(data.maxGuests) ? ' selected' : ''}>${i+1}</option>`
              ).join('')}
            </select>
          </div>
          <div class="field">
            <label>Votre nom</label>
            <input type="text" id="clientName" placeholder="Votre nom">
          </div>
          <div class="field">
            <label>Votre t√©l√©phone</label>
            <input type="tel" id="clientPhone" placeholder="+221 ...">
          </div>
          <div class="field">
            <label>Mode de paiement</label>
            <input type="text" value="Wave (paiement direct au propri√©taire)" disabled>
          </div>
        </div>

        <div class="summary resa-summary-box" id="summary">
          S√©lectionnez vos dates d'arriv√©e et de d√©part pour voir le nombre de nuits
          et une estimation en tarif nuit. Le tarif final sera valid√©
          avec le propri√©taire sur WhatsApp.
        </div>
      </article>

      <article class="card">
        <h2 class="digiy-title-strong">Infos pratiques & contacts</h2>
        <small class="digiy-label-strong">Quelques points importants pour votre s√©jour.</small>

        <ul style="margin:8px 0 0 16px; padding:0; font-size:13px;">
          <li>${data.typeLogement} pour ${data.maxGuests} personnes maximum.</li>
          <li>Tarifs : ${parseInt(data.tarifNuit).toLocaleString('fr-FR')} F / nuit ¬∑ ${parseInt(data.tarifSemaine).toLocaleString('fr-FR')} F / semaine ¬∑ ${parseInt(data.tarifMois).toLocaleString('fr-FR')} F / mois.</li>
          <li>S√©n√©lec en sus selon consommation.</li>
          <li>R√©servation et confirmation par WhatsApp ou appel direct.</li>
          <li class="digiy-black-strong">Propri√©taire : ${data.ownerName}</li>
          <li>Paiement direct au propri√©taire par Wave.</li>
        </ul>

        <div style="margin-top:10px;font-size:12px;line-height:1.6;">
          WhatsApp principal : 
          <a class="inline-link"
             href="https://wa.me/${data.ownerWaId}"
             target="_blank" rel="noopener">
            ${data.ownerWa}
          </a><br>

          ${data.ownerWa2 !== data.ownerWa ? `WhatsApp / t√©l√©phone secondaire : 
          <a class="inline-link"
             href="https://wa.me/${data.ownerWa2.replace(/\+/g, '')}"
             target="_blank" rel="noopener">
            ${data.ownerWa2}
          </a><br><br>` : ''}

          <strong class="digiy-label-strong">Num√©ro Wave (paiement) :</strong><br>
          <span class="pay-number">${data.wavePhone}</span><br>
          <span class="pay-note">‚úî √Ä utiliser dans votre application Wave</span>
          <br><br>

          Appel direct : 
          <a class="inline-link"
             href="tel:${data.ownerWa}">
            üìû ${data.ownerWa}
          </a><br><br>

          ${data.videoUrl ? `Vid√©o de pr√©sentation : 
          <a class="inline-link"
             href="${data.videoUrl}"
             target="_blank" rel="noopener">
            üé• Voir la vid√©o
          </a><br>` : ''}

          Visuel DIGIY : 
          <a class="inline-link"
             href="${data.photoUrl}"
             target="_blank" rel="noopener">
            üì∏ Voir la photo
          </a>
        </div>
      </article>
    </section>
  </main>

  <footer>
    ${data.logementNom} ‚Äî ${data.logementVille} ¬∑ Module DIGIY LOC personnalis√© ¬∑ Contact WhatsApp : ${data.ownerWa}
  </footer>
</div>

<script>
const OWNER_NAME       = "${data.ownerName}";
const OWNER_WA_ID      = "${data.ownerWaId}";
const OWNER_PHONE_MAIN = "${data.ownerWa}";
const OWNER_PHONE_SEC  = "${data.ownerWa2}";
const WAVE_PHONE       = "${data.wavePhone}";

const LOGEMENT_NOM     = "${data.logementNom}";
const LOGEMENT_ID      = "${data.logementId}";
const LOGEMENT_VILLE   = "${data.logementVille}";

const TARIF_NUIT       = ${data.tarifNuit};
const TARIF_SEMAINE    = ${data.tarifSemaine};
const TARIF_MOIS       = ${data.tarifMois};

const MAX_GUESTS       = ${data.maxGuests};

function formatMoney(x){
  return (x||0).toLocaleString("fr-FR") + " F";
}

const dateIn      = document.getElementById("dateIn");
const dateOut     = document.getElementById("dateOut");
const guests      = document.getElementById("guests");
const clientName  = document.getElementById("clientName");
const clientPhone = document.getElementById("clientPhone");
const summary     = document.getElementById("summary");
const btnWa       = document.getElementById("btnWa");
const btnCall     = document.getElementById("btnCall");
const btnSavePayMethod = document.getElementById("btnSavePayMethod");

function getNights(){
  if(!dateIn.value || !dateOut.value) return 0;
  const d1 = new Date(dateIn.value);
  const d2 = new Date(dateOut.value);
  const diff = d2 - d1;
  if(isNaN(diff) || diff <= 0) return 0;
  return Math.round(diff / (1000*60*60*24));
}

function updateSummary(){
  const nights = getNights();
  const g = Number(guests.value||"1");
  if(!nights){
    summary.innerHTML = "S√©lectionnez vos dates d'arriv√©e et de d√©part pour voir le nombre de nuits et une estimation en tarif nuit (" + formatMoney(TARIF_NUIT) + " / nuit). Le tarif final sera valid√© avec le propri√©taire sur WhatsApp.";
    return;
  }
  const totalNight = nights * TARIF_NUIT;
  summary.innerHTML = "<div>S√©jour de <strong>" + nights + "</strong> nuit(s) pour <strong>" + g + "</strong> personne(s) (max " + MAX_GUESTS + ").</div>" +
    "<div>Estimation en tarif nuit (" + formatMoney(TARIF_NUIT) + " / nuit) : <strong>" + formatMoney(totalNight) + "</strong>.</div>" +
    "<div style='margin-top:4px;font-size:12px;'>" +
    "Tarifs indicatifs : <strong>" + formatMoney(TARIF_SEMAINE) + "</strong> la semaine ¬∑ <strong>" + formatMoney(TARIF_MOIS) + "</strong> le mois (S√©n√©lec en sus).<br>" +
    "Le tarif final sera confirm√© avec le propri√©taire lors de l'√©change WhatsApp." +
    "</div>";
}

[dateIn, dateOut, guests].forEach(el=>{
  el.addEventListener("change", updateSummary);
});

function getPayMethodLabel(){
  return "Wave (" + WAVE_PHONE + ")";
}

btnWa.addEventListener("click", ()=>{
  const nights = getNights();
  const g = Number(guests.value||"1");
  const name = clientName.value.trim() || "Client";
  const phoneClient = clientPhone.value.trim() || "Non communiqu√©";

  let txt = "Bonjour, je souhaite une r\\u00e9servation pour " + LOGEMENT_NOM + " \\u00e0 " + LOGEMENT_VILLE + ".%0A";
  txt += "- Nom : " + name + "%0A";
  txt += "- T\\u00e9l\\u00e9phone : " + phoneClient + "%0A";
  if(dateIn.value && dateOut.value){
    txt += "- Dates : du " + dateIn.value + " au " + dateOut.value + " (" + nights + " nuit(s))%0A";
  }
  txt += "- Nombre de personnes : " + g + "%0A";
  txt += "- Mode de paiement pr\\u00e9vu : " + getPayMethodLabel() + "%0A";
  txt += "- Tarifs DIGIY LOC : Nuit " + formatMoney(TARIF_NUIT) + " / Semaine " + formatMoney(TARIF_SEMAINE) + " / Mois " + formatMoney(TARIF_MOIS) + " (S\\u00e9n\\u00e9lec en sus).%0A";
  txt += "%0AMerci de me confirmer la disponibilit\\u00e9.";
  const url = "https://wa.me/" + OWNER_WA_ID + "?text=" + txt;
  window.open(url, "_blank");
});

btnCall.addEventListener("click", ()=>{
  window.location.href = "tel:" + OWNER_PHONE_MAIN;
});

btnSavePayMethod.addEventListener("click", ()=>{
  const nights = getNights();
  const g = Number(guests.value||"1");
  const name = clientName.value.trim() || "Client";
  const phoneClient = clientPhone.value.trim() || "Non communiqu√©";
  const methodLabel = getPayMethodLabel();

  const bookingData = {
    logementId: LOGEMENT_ID,
    ownerName: OWNER_NAME,
    ownerPhone: OWNER_PHONE_MAIN,
    clientName: name,
    clientPhone: phoneClient,
    dateIn: dateIn.value || null,
    dateOut: dateOut.value || null,
    nights,
    guests: g,
    payMethod: "wave",
    payMethodLabel: methodLabel,
    createdAt: new Date().toISOString()
  };

  console.log("DIGIY LOC ‚Äî booking enregistr√© (local, √† connecter √† la base) :", bookingData);

  let txt = "Bonjour, je viens d'enregistrer mes infos pour " + LOGEMENT_NOM + " \\u00e0 " + LOGEMENT_VILLE + ".%0A";
  txt += "- Nom : " + name + "%0A";
  txt += "- T\\u00e9l\\u00e9phone : " + phoneClient + "%0A";
  if(dateIn.value && dateOut.value){
    txt += "- S\\u00e9jour : du " + dateIn.value + " au " + dateOut.value + " (" + nights + " nuit(s))%0A";
  }
  txt += "- Nombre de personnes : " + g + "%0A";
  txt += "- Mode de paiement pr\\u00e9vu : " + methodLabel + "%0A";
  txt += "%0AJe ferai le r\\u00e8glement directement via mon application Wave.";
  const url = "https://wa.me/" + OWNER_WA_ID + "?text=" + txt;
  window.open(url, "_blank");
});
</scr` + `ipt>
</body>
</html>`;
}
</script>

</body>
</html>
