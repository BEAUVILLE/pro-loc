<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DIGIY ‚Äî Acc√®s PRO</title>

  <style>
    :root{--bg:#022c22;--bg2:#065f46;--card:#052e16;--accent:#facc15;--text:#e5e7eb;--muted:#9ca3af;--danger:#f97373;--ok:#22c55e;--line:rgba(148,163,184,.35);}
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      font-family:system-ui,-apple-system,Segoe UI,Roboto;
      color:var(--text);
      background:radial-gradient(circle at top,#16a34a22 0,transparent 55%),linear-gradient(135deg,var(--bg),var(--bg2));
    }
    .wrap{width:100%;max-width:520px}
    .card{
      background:linear-gradient(145deg,rgba(5,46,22,.97),rgba(6,95,70,.96));
      border-radius:24px;
      border:1px solid rgba(15,118,110,.45);
      padding:20px 18px;
      box-shadow:0 24px 60px rgba(0,0,0,.75)
    }
    h1{text-align:center;font-size:18px;letter-spacing:.08em;margin-bottom:10px}
    p{text-align:center;color:var(--muted);font-size:13px;margin-bottom:14px}
    label{font-size:12px;color:var(--muted)}
    input{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(15,23,42,.55);
      color:var(--text);
      margin-bottom:8px;
    }
    .btn{
      width:100%;
      padding:11px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-weight:700;
      margin-top:6px;
    }
    .primary{
      background:linear-gradient(135deg,#facc15,#f97316);
      color:#022c22;
    }
    .msg{margin-top:10px;text-align:center;font-size:13px}
    .ok{color:var(--ok)}
    .err{color:var(--danger)}
  </style>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>üîê ACC√àS PRO DIGIY</h1>
      <p>Connexion s√©curis√©e par SMS (OTP)</p>

      <label>T√©l√©phone</label>
      <input id="phone" placeholder="+221771342889" />

      <button class="btn primary" id="sendOtp">üì© Envoyer le code</button>

      <label style="margin-top:10px">Code re√ßu par SMS</label>
      <input id="otp" placeholder="ex: 955496" inputmode="numeric" />

      <button class="btn" id="verifyOtp">‚úÖ Valider</button>

      <div class="msg" id="msg"></div>
    </div>
  </div>

<script>
(function(){
 const SUPABASE_URL = "https://wesqmwjjtsefyjnluosj.supabase.co";
const SUPABASE_ANON_KEY = "TON_ANON_KEY_ICI";
  const client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const $ = id => document.getElementById(id);
  const msg = (t,c="")=>{
    $("msg").className="msg "+c;
    $("msg").textContent=t;
  };

  $("sendOtp").onclick = async ()=>{
    msg("");
    const phone = $("phone").value.trim();
    if(!phone.startsWith("+")) return msg("Num√©ro invalide", "err");

    const { error } = await client.auth.signInWithOtp({
      phone,
      options:{ channel:"sms" }
    });

    if(error) msg(error.message,"err");
    else msg("üì≤ Code envoy√© par SMS","ok");
  };

  $("verifyOtp").onclick = async ()=>{
    msg("");
    const phone = $("phone").value.trim();
    const token = $("otp").value.trim();

    const { error } = await client.auth.verifyOtp({
      phone, token, type:"sms"
    });

    if(error) msg(error.message,"err");
    else msg("‚úÖ Connect√©. Session active.","ok");
  };
})();
</script>
</body>
</html>
